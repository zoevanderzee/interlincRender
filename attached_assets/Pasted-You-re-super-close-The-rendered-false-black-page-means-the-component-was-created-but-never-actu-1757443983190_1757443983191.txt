You’re super close. The “rendered:false” + black page means the component was created but never actually mounted. Fix that by mounting into a real DOM node (not a selector), and only after the node is visible (non-zero size). Also clean up on unmount so HMR/StrictMode don’t double-mount.
Give your agent this exact patch.
Replace your onboarding page with this (verbatim)
// client/src/pages/ConnectOnboarding.tsx
import { useEffect, useLayoutEffect, useRef } from "react";
import { loadConnectAndInitialize } from "@stripe/connect-js";

const PK = (import.meta.env.VITE_STRIPE_PUBLISHABLE_KEY || "").trim();

function assertStr(name: string, val: any) {
  if (typeof val !== "string" || !val.length) throw new Error(`${name} missing/invalid`);
}

export default function ConnectOnboarding() {
  const containerRef = useRef<HTMLDivElement | null>(null);
  const started = useRef(false);

  // Ensure the container ref is present before we try to mount
  useLayoutEffect(() => {
    if (!containerRef.current) {
      console.error("Missing #onboarding-container node");
    }
  }, []);

  useEffect(() => {
    if (started.current) return; // guard StrictMode/HMR double-run
    started.current = true;

    (async () => {
      // 1) Basic sanity
      assertStr("VITE_STRIPE_PUBLISHABLE_KEY", PK);

      // 2) Ask server for { accountId, client_secret }
      const resp = await fetch("/api/connect/create-account-session", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ accountId: null, country: "GB", publishableKey: PK }),
      });
      if (!resp.ok) throw new Error(`API ${resp.status}: ${await resp.text()}`);
      const { accountId, client_secret } = await resp.json();
      assertStr("accountId", accountId);
      assertStr("client_secret", client_secret); // don't assume a specific prefix

      // 3) Init Connect.js
      const connect = await loadConnectAndInitialize({
        publishableKey: PK,
        fetchClientSecret: async () => client_secret,
      });

      // 4) Create the component
      const comp = connect.create("account-onboarding");
      if (typeof (comp as any).mount !== "function") {
        console.error("Component object:", comp);
        throw new Error("Connect component not mountable (wrong SDK/init).");
      }

      // 5) Wait until the container is *visible* (non-zero size) then mount
      const el = containerRef.current!;
      const waitVisible = async (tries = 30) => {
        for (let i = 0; i < tries; i++) {
          const r = el.getBoundingClientRect();
          const cs = getComputedStyle(el);
          const visible =
            r.width > 0 &&
            r.height > 0 &&
            cs.display !== "none" &&
            cs.visibility !== "hidden";
          if (visible) return;
          await new Promise((rf) => requestAnimationFrame(rf));
        }
        throw new Error("Container never became visible (width/height 0 or hidden).");
      };
      await waitVisible();

      comp.on("ready", () => console.log("[connect] ready (embedded) for", accountId));
      comp.on?.("exit", () => console.log("[connect] exit"));

      // Mount *into the node* (not a selector string)
      comp.mount(el);

      // 6) Cleanup for HMR/route changes
      (window as any).__connectOnboarding = comp;
    })().catch((e) => {
      console.error("[embedded connect failed]", e);
      alert(String(e?.message || e));
    });

    return () => {
      try {
        const comp = (window as any).__connectOnboarding;
        if (comp?.unmount) comp.unmount();
      } catch {}
    };
  }, []);

  return (
    <div style={{ padding: 24, maxWidth: 720, margin: "0 auto" }}>
      <h1>Embedded Connect Onboarding</h1>
      <div
        id="onboarding-container"
        ref={containerRef}
        style={{
          minHeight: 520,
          width: "100%",
          display: "block",
          border: "1px solid #e5e7eb",
          background: "#fafafa",
        }}
      />
    </div>
  );
}
Why this fixes the “rendered:false” / black page
Mounting into a node (comp.mount(el)) avoids selector resolution quirks and “silent” failures.
Visibility guard waits until the container actually has size; mounting into display:none / zero-width elements is a common silent fail.
StrictMode/HMR guard + cleanup stops duplicate create()/mount() calls that leave the component in a bad state.
No prefix assumptions for the account-session client_secret (Stripe doesn’t guarantee a specific prefix here).
Quick server sanity (no changes if you already did this)
Endpoint: POST /api/connect/create-account-session → returns { accountId: "acct_…", client_secret: "<string>" }.
Uses stripe.accountSessions.create({ account, components: { account_onboarding: { enabled: true }}}).
Final acceptance checks
Network tab shows /api/connect/create-account-session 200.
Console logs: [connect] ready (embedded) for acct_….
The onboarding UI appears inside the bordered container.
No navigation to connect.stripe.com.
This page imports only @stripe/connect-js.