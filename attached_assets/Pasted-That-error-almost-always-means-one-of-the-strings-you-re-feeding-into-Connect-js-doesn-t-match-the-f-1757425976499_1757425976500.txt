That error almost always means one of the strings you’re feeding into Connect.js doesn’t match the format Stripe expects. In practice it’s one of these:
Publishable key isn’t a real pk (pk_test_… or pk_live_…), or it’s undefined/quoted weirdly.
Account Session client secret isn’t a seti_… string (you might be returning the wrong value/object/URL).
Mount got the wrong thing (must be a selector string like "#onboarding-container").
Below is a tiny drop-in patch that asserts the values before initializing and will tell you exactly which one is wrong. Paste this into your client component and try again.
import { useEffect } from "react";
import { loadConnectAndInitialize } from "@stripe/connect-js";

const PUBLISHABLE_KEY = (import.meta.env.VITE_STRIPE_PUBLISHABLE_KEY || "").trim();

function expectPattern(name: string, value: any, re: RegExp) {
  if (typeof value !== "string") {
    throw new Error(`${name} is not a string (got ${typeof value})`);
  }
  const ok = re.test(value);
  if (!ok) {
    throw new Error(`${name} did not match expected pattern. Got: ${value.slice(0, 24)}…`);
  }
}

export default function ConnectOnboarding() {
  useEffect(() => {
    (async () => {
      // 1) Sanity check the PK first
      expectPattern("PUBLISHABLE_KEY", PUBLISHABLE_KEY, /^pk_(test|live)_[A-Za-z0-9]+/);

      // 2) Get { accountId, client_secret } from your server
      const resp = await fetch("/api/connect/create-account-session", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ accountId: null, country: "GB" })
      });
      if (!resp.ok) {
        const text = await resp.text();
        throw new Error(`Server error: ${text}`);
      }
      const json = await resp.json();
      const { accountId, client_secret } = json;

      // 3) Assert shapes before calling Connect.js
      expectPattern("accountId", accountId, /^acct_[A-Za-z0-9]+/);
      expectPattern("client_secret", client_secret, /^seti_[A-Za-z0-9_]+/);

      // 4) Initialize Connect.js and mount
      const connect = await loadConnectAndInitialize({
        publishableKey: PUBLISHABLE_KEY,
        fetchClientSecret: async () => client_secret
      });

      const onboarding = connect.create("account-onboarding");
      if (typeof (onboarding as any).mount !== "function") {
        console.error("account-onboarding object:", onboarding);
        throw new Error("Connect component is not mountable (wrong library or bad init).");
      }

      onboarding.on("ready", () => console.log("[Connect] embedded onboarding ready for", accountId));
      onboarding.mount("#onboarding-container"); // must be a CSS selector string
    })().catch((e) => {
      console.error("Error starting onboarding:", e);
      alert(`Error starting onboarding:\n${e.message}`);
    });
  }, []);

  return (
    <div>
      <h1>Embedded Connect Onboarding</h1>
      <div id="onboarding-container" style={{ minHeight: 520 }} />
    </div>
  );
}
And on the server, make sure you’re returning exactly the right fields:
// POST /api/connect/create-account-session
const session = await stripe.accountSessions.create({
  account: accountId, // must look like acct_…
  components: { account_onboarding: { enabled: true } },
});
res.json({ accountId, client_secret: session.client_secret }); // <-- return ONLY the client_secret string
Common causes of this exact message
Wrong secret returned:
Your endpoint returns an object, URL, or session ID instead of the client secret string. The client must receive something like seti_abc123… (not an http URL, not {client_secret: …} nested incorrectly, not undefined).
Env var not present in the client bundle:
In Vite, publishable keys must be under VITE_*. If PUBLISHABLE_KEY is "undefined" or "", the pattern check will fail.
Mixed keys or wrong account:
pk_live on the client with an sk_test on the server (or vice versa) won’t cause a pattern error by itself, but often leads to invalid/expired client secrets that then fail validation elsewhere. Keep both in live for live, test for test.
Using @stripe/stripe-js anywhere on this page:
If you import loadStripe or call window.Stripe, you can end up creating the wrong kind of object — then mount is undefined or validation fails. The onboarding page must use only @stripe/connect-js.
Run the patch once; it’ll tell you which string is off. Fix that one thing and the embedded component will initialize.